{"ast":null,"code":"import axios from 'axios';\nexport const ApiEntries = {\n  fetchEntries(userId, date) {\n    return axios.get(`https://budget-el.herokuapp.com/entries/get/?userId=${userId}&date=${date}`);\n  },\n\n  createEntry(entrie) {\n    return axios.post('https://budget-el.herokuapp.com/entries/create', entrie);\n  },\n\n  updateEntry(entrie) {\n    return axios.put(`https://budget-el.herokuapp.com/entries/update`, entrie);\n  },\n\n  deleteEntries(id) {\n    return axios.delete(`https://budget-el.herokuapp.com/entries/delete/?id=${id}`);\n  }\n\n};\nexport const ApiAuth = {\n  _token: null,\n\n  isLoggedIn() {\n    return !!this._token;\n  },\n\n  _storeTokenToAxios(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n\n  setToken(token) {\n    this._token = token;\n\n    this._storeTokenToAxios(token);\n  },\n\n  init() {\n    try {\n      const token = window.localStorage.getItem('token');\n      this.setToken(token);\n    } catch (error) {\n      console.log('NOT FOUND TOKEN');\n      console.log(error);\n    }\n\n    return this._token;\n  },\n\n  register(user) {\n    return axios.post(`https://budget-el.herokuapp.com/auth/register`, user);\n  },\n\n  login(user) {\n    return axios.post(`https://budget-el.herokuapp.com/auth/login`, user);\n  },\n\n  logout() {\n    window.localStorage.removeItem(\"token\");\n    this.setToken(null);\n  }\n\n};\nexport const ApiAccount = {\n  get() {\n    return axios.get('https://budget-el.herokuapp.com/account');\n  }\n\n};","map":{"version":3,"sources":["/Users/macbook/Documents/DEVELOPMENT/budget-tracker/client/src/api/index.ts"],"names":["axios","ApiEntries","fetchEntries","userId","date","get","createEntry","entrie","post","updateEntry","put","deleteEntries","id","delete","ApiAuth","_token","isLoggedIn","_storeTokenToAxios","token","defaults","headers","common","Authorization","setToken","init","window","localStorage","getItem","error","console","log","register","user","login","logout","removeItem","ApiAccount"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAuBA,OAAO,MAAMC,UAAU,GAAG;AACtBC,EAAAA,YAAY,CAACC,MAAD,EAAiBC,IAAjB,EAA4D;AACtE,WAAOJ,KAAK,CAACK,GAAN,CAAW,uDAAsDF,MAAO,SAAQC,IAAK,EAArF,CAAP;AACD,GAHqB;;AAKtBE,EAAAA,WAAW,CAAEC,MAAF,EAA6C;AACtD,WAAOP,KAAK,CAACQ,IAAN,CAAW,gDAAX,EAA6DD,MAA7D,CAAP;AACD,GAPqB;;AAStBE,EAAAA,WAAW,CAAEF,MAAF,EAA6C;AACpD,WAAOP,KAAK,CAACU,GAAN,CAAW,gDAAX,EAA4DH,MAA5D,CAAP;AACH,GAXqB;;AAatBI,EAAAA,aAAa,CAACC,EAAD,EAA+B;AACxC,WAAOZ,KAAK,CAACa,MAAN,CAAc,sDAAqDD,EAAG,EAAtE,CAAP;AACH;;AAfqB,CAAnB;AAkBP,OAAO,MAAME,OAAO,GAAG;AACrBC,EAAAA,MAAM,EAAE,IADa;;AAErBC,EAAAA,UAAU,GAAG;AACX,WAAO,CAAC,CAAC,KAAKD,MAAd;AACD,GAJoB;;AAKrBE,EAAAA,kBAAkB,CAACC,KAAD,EAAmB;AACnClB,IAAAA,KAAK,CAACmB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,aAA9B,GAA+C,UAASJ,KAAM,EAA9D;AACD,GAPoB;;AASrBK,EAAAA,QAAQ,CAACL,KAAD,EAAa;AACnB,SAAKH,MAAL,GAAcG,KAAd;;AACA,SAAKD,kBAAL,CAAwBC,KAAxB;AACD,GAZoB;;AAcrBM,EAAAA,IAAI,GAAG;AACH,QAAI;AACD,YAAMN,KAAK,GAAGO,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAd;AACA,WAAKJ,QAAL,CAAcL,KAAd;AACF,KAHD,CAGE,OAAOU,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AAED;;AACD,WAAO,KAAKb,MAAZ;AACH,GAxBoB;;AA0BrBgB,EAAAA,QAAQ,CAACC,IAAD,EAA6C;AACnD,WAAOhC,KAAK,CAACQ,IAAN,CAAY,+CAAZ,EAA4DwB,IAA5D,CAAP;AACD,GA5BoB;;AA8BrBC,EAAAA,KAAK,CAACD,IAAD,EAA6C;AAChD,WAAOhC,KAAK,CAACQ,IAAN,CAAY,4CAAZ,EAAyDwB,IAAzD,CAAP;AACD,GAhCoB;;AAiCrBE,EAAAA,MAAM,GAAG;AACPT,IAAAA,MAAM,CAACC,YAAP,CAAoBS,UAApB,CAA+B,OAA/B;AACA,SAAKZ,QAAL,CAAc,IAAd;AACD;;AApCoB,CAAhB;AAuCP,OAAO,MAAMa,UAAU,GAAG;AACxB/B,EAAAA,GAAG,GAAsB;AACvB,WAAOL,KAAK,CAACK,GAAN,CAAU,yCAAV,CAAP;AACD;;AAHuB,CAAnB","sourcesContent":["import axios from 'axios'\nimport { EntrieType, UserType, UserSingleType } from \"../types\"\n\n\ntype TokenType = string\ntype AuthDataType = {\n    data: Array<UserType>\n    token: string\n}\ntype AuthEntrieDataType = {\n    data: Array<EntrieType>\n    token: string\n}\n\ntype ApiAuthType = {\n   data: AuthDataType\n  [propName: string]: any\n}\ntype ApiEntryType = {\n   data:  EntrieType\n  [propName: string]: any\n}\n\nexport const ApiEntries = {    \n    fetchEntries(userId: number, date: string): Promise<AuthEntrieDataType> {\n      return axios.get(`https://budget-el.herokuapp.com/entries/get/?userId=${userId}&date=${date}`)\n    },\n\n    createEntry( entrie: EntrieType): Promise<ApiEntryType> {\n      return axios.post('https://budget-el.herokuapp.com/entries/create', entrie)\n    },\n\n    updateEntry( entrie: EntrieType): Promise<ApiEntryType> {\n        return axios.put(`https://budget-el.herokuapp.com/entries/update`, entrie)\n    },\n\n    deleteEntries(id: number): Promise<boolean> {\n        return axios.delete(`https://budget-el.herokuapp.com/entries/delete/?id=${id}`)\n    }\n}\n\nexport const ApiAuth = {\n  _token: null,\n  isLoggedIn() {\n    return !!this._token;\n  },\n  _storeTokenToAxios(token: TokenType) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`\n  },\n\n  setToken(token: any) {\n    this._token = token\n    this._storeTokenToAxios(token)\n  },\n\n  init() {\n      try {\n         const token = window.localStorage.getItem('token')\n         this.setToken(token)\n      } catch (error) {\n        console.log('NOT FOUND TOKEN');\n        console.log(error);\n\n      }  \n      return this._token\n  },\n\n  register(user: UserSingleType): Promise<ApiAuthType> {\n    return axios.post(`https://budget-el.herokuapp.com/auth/register`, user )\n  },\n\n  login(user: UserSingleType): Promise<ApiAuthType> {\n    return axios.post(`https://budget-el.herokuapp.com/auth/login`, user)\n  },\n  logout() {\n    window.localStorage.removeItem(\"token\")\n    this.setToken(null)\n  }\n}\n\nexport const ApiAccount = {\n  get(): Promise<UserType> {\n    return axios.get('https://budget-el.herokuapp.com/account')\n  },\n}"]},"metadata":{},"sourceType":"module"}
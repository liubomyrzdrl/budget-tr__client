{"ast":null,"code":"import { ApiAuth } from \"../../api/index\";\nimport { loginStart, loginSuccess, loginError, registerStart, registerSuccess, registerError } from './authActions';\nexport function login(body) {\n  return async function loginThunk(dispatch) {\n    try {\n      dispatch(loginStart());\n      const res = await ApiAuth.login(body);\n      const token = res.data.token;\n      ApiAuth.setToken(token);\n      window.localStorage.setItem('token', String(token));\n      dispatch(loginSuccess());\n    } catch (err) {\n      dispatch(loginError(err));\n    }\n  };\n}\nexport function register(body) {\n  return async function registerThunk(dispatch) {\n    try {\n      dispatch(registerStart());\n      const res = await ApiAuth.register(body);\n      const token = res.data.token;\n      ApiAuth.setToken(token);\n      window.localStorage.setItem('token', String(token));\n      dispatch(registerSuccess());\n    } catch (err) {\n      dispatch(registerError(err)); //dispatch(actions.register.error({ message: err}));\n    }\n  };\n}","map":{"version":3,"sources":["/Users/macbook/Documents/DEVELOPMENT/budget-tracker/client/src/modules/auth/authOperations.ts"],"names":["ApiAuth","loginStart","loginSuccess","loginError","registerStart","registerSuccess","registerError","login","body","loginThunk","dispatch","res","token","data","setToken","window","localStorage","setItem","String","err","register","registerThunk"],"mappings":"AAAA,SAASA,OAAT,QAAwB,iBAAxB;AACA,SAASC,UAAT,EAAoBC,YAApB,EAAkCC,UAAlC,EAA8CC,aAA9C,EAA6DC,eAA7D,EAA8EC,aAA9E,QAAmG,eAAnG;AAcA,OAAO,SAASC,KAAT,CAAeC,IAAf,EAAmD;AACxD,SAAO,eAAeC,UAAf,CAA0BC,QAA1B,EAA4D;AACjE,QAAI;AACFA,MAAAA,QAAQ,CAACT,UAAU,EAAX,CAAR;AACA,YAAMU,GAAG,GAAG,MAAMX,OAAO,CAACO,KAAR,CAAcC,IAAd,CAAlB;AACA,YAAMI,KAAK,GAAGD,GAAG,CAACE,IAAJ,CAASD,KAAvB;AACAZ,MAAAA,OAAO,CAACc,QAAR,CAAiBF,KAAjB;AACAG,MAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,EAAqCC,MAAM,CAACN,KAAD,CAA3C;AACAF,MAAAA,QAAQ,CAACR,YAAY,EAAb,CAAR;AACD,KAPD,CAOE,OAAOiB,GAAP,EAAY;AACZT,MAAAA,QAAQ,CAACP,UAAU,CAACgB,GAAD,CAAX,CAAR;AACD;AACF,GAXD;AAYD;AAED,OAAO,SAASC,QAAT,CAAkBZ,IAAlB,EAAuD;AAC5D,SAAO,eAAea,aAAf,CAA6BX,QAA7B,EAA2C;AAChD,QAAI;AACFA,MAAAA,QAAQ,CAACN,aAAa,EAAd,CAAR;AAEA,YAAMO,GAAG,GAAG,MAAMX,OAAO,CAACoB,QAAR,CAAiBZ,IAAjB,CAAlB;AAEA,YAAMI,KAAK,GAAGD,GAAG,CAACE,IAAJ,CAASD,KAAvB;AACAZ,MAAAA,OAAO,CAACc,QAAR,CAAiBF,KAAjB;AACAG,MAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,EAAqCC,MAAM,CAACN,KAAD,CAA3C;AAEAF,MAAAA,QAAQ,CAACL,eAAe,EAAhB,CAAR;AACD,KAVD,CAUE,OAAOc,GAAP,EAAY;AACZT,MAAAA,QAAQ,CAACJ,aAAa,CAACa,GAAD,CAAd,CAAR,CADY,CAEZ;AACD;AACF,GAfD;AAgBD","sourcesContent":["import { ApiAuth } from \"../../api/index\";\nimport { loginStart,loginSuccess, loginError, registerStart, registerSuccess, registerError } from './authActions';\nimport { ThunkAction } from \"redux-thunk\"\nimport { Dispatch } from \"react\"\nimport { Action } from \"redux-actions\"\nimport { UserSingleType } from \"../../types\";\n\nexport type AuthThunkType = ThunkAction<\n  Promise<UserSingleType| void>,\n  UserSingleType,\n  unknown,\n  Action<void>\n>\n\n\nexport function login(body: UserSingleType):AuthThunkType {\n  return async function loginThunk(dispatch: Dispatch<Action<void>>) {\n    try {\n      dispatch(loginStart());    \n      const res = await ApiAuth.login(body);\n      const token = res.data.token;\n      ApiAuth.setToken(token);\n      window.localStorage.setItem('token', String(token));\n      dispatch(loginSuccess())\n    } catch (err) {\n      dispatch(loginError(err));\n    }\n  };\n}\n\nexport function register(body: UserSingleType): AuthThunkType {\n  return async function registerThunk(dispatch:any) {\n    try {\n      dispatch(registerStart());\n\n      const res = await ApiAuth.register(body);\n  \n      const token = res.data.token;\n      ApiAuth.setToken(token);\n      window.localStorage.setItem('token', String(token) );\n\n      dispatch(registerSuccess());\n    } catch (err) {\n      dispatch(registerError(err));\n      //dispatch(actions.register.error({ message: err}));\n    }\n  };\n}"]},"metadata":{},"sourceType":"module"}